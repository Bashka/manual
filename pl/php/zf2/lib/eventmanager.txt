[[:start|Главная]] > [[:ЯП:ZF2|Zend Framework 2]] > Компоненты фреймворка > **EventManager**

===== Менеджер событий =====

Для реализации модели событийного взаимодействия в ZF2 используется класс [[http://framework.zend.com/manual/current/en/modules/zend.event-manager.event-manager.html|EventManager]]. Объекты данного класса хранят информацию о всех зарегистрированных слушателях событий, а так же реализуют следующие основные методы:

  * attach - метод позволяет добавить слушателя к событию;
  * detach - метод позволяет отписать слушателя от события;
  * clearListeners - метод отписывает всех слушателей от события;
  * trigger - метод генерирует событие.

<code php>
$em = new EventManager;
$em->attach('myEvent', function($e){
  echo 'My event';
});
$em->trigger('myEvent');
</code>

==== attach ====

Метод ''attach'' позволяет подписать на событие конкретную функцию-слушатель. Метод принимает в качестве первого параметра имя прослушиваемого события или массива событий, а в качестве второго любую функцию-слушатель или метод класса.

<code php>
$em->attach('myEvent', [$object, 'listener']);
</code>

В имени события может использоваться символ "звездочка", для поиска события по шаблону.

==== detach ====

Метод ''detach'' отписывает слушателя события. Делается это передавая методу функцию-слушатель, которую необходимо отписать.

<code php>
$em->detach($callback);
</code>

==== clearListeners ====

Метод ''clearListeners'' аналогичен методу ''detach'' с той лишь разницей, что отписывает всех слушателей от события, переданного в качестве параметра.

<code php>
$em->clearListeners('myEvent');
</code>

==== trigger ====

Метод ''trigger'' генерирует переданное в качестве первого параметра событие. В качестве второго параметра, можно передать объект (или строку), являющийся инициатором данного события. Третий параметр используется для задания параметров события.