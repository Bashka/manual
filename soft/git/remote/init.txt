====== Чистый репозиторий ======

Git репозитории делятся на два типа:

  - Обычные репозитории - проект содержит каталог ''.git'' и файлы проекта. Такой тип репозитория чаще всего используется на локальных машинах, так как он позволяет изменять файлы проекта и управлять репозиторием
  - Чистые репозитории - проект представлен каталогом, содержащим хранилище Git (аналог каталога ''.git''). Такой тип репозитория чаще всего используется на Git-сервере, так как нет необходимости хранить файлы проекта

====== Git-сервер с доступом по SSH ======

Для создания Git-сервера с доступом по SSH необходим сервер с настроеным SSH доступом и чистый репозиторий, для создания которого может использоваться два подхода:

  * Создание пустого и чистого репозитория прямо на сервере
  * Клонирование существующего, обычного репозитория на сервер в качестве чистого

Те пользователи, которые имеют право на запись в каталог репозитория автоматически получают право на выгрузку в этот репозиторий.

===== Создание репозитория на сервере =====

Этот подход используется в том случае, если проект создается сначала на сервере в виде пустого каталога, а затем заполняется из локальных копий репозитория.

Для создания чистого репозитория на сервере необходимо:

  - Подключиться к серверу и перейти в каталог, в котором будет располагаться чистый репозиторий
  - Создать пустой каталог, который будет хранить чистый репозиторий (именовать такой каталог принято так: ''имя.git'') и перейти в него
  - Выполнить команду ''%%git init --bare%%'', которая создаст чистый репозиторий в каталоге
  - На локальной машине склонировать репозиторий с помощью команды ''%%git clone user@server:/path/имя.git%%''. При этом будет создана ссылка ''origin'' на сервер в локальном репозитории
  - Первая выгрузка на сервер выполняется по средствам команды ''%%git push -u origin master%%''

===== Клонирование репозитория на сервер =====

Этот подход используется в том случае, если проект уже существует и необходимо выложить его в общий доступ.

Для клонирования репозитория на сервер необходимо:

  - Клонировать репозиторий на локальной машине с помощью команды ''%%git clone --bare репозиторий имя.git%%''. При этом будет создан чистый репозиторий
  - Перенести полученную чистую копию на сервер
  - На локальной машине склонировать репозиторий с помощью команды ''%%git clone user@server:/path/имя.git%%''. При этом будет создана ссылка ''origin'' на сервер в локальном репозитории

===== Использование SSH-ключей =====

Часто права доступа к Git репозиторию реализуются следующим образом:

  * Создается пользователь ''git'', которому разрешен доступ к репозиторию
  * Все пользователи, которым разрешена выгрузка в репозиторий создают открытые SSH-ключи с помощью команды ''ssh-keygen'' и передают их администратору
  * Администратор добавляет открытые SSH-ключи в файл ''.ssh/authorized_keys''
  * Если необходимо запретить пользователям подключаться к серверу по SSH, достаточно указать  (поменять значение в файле /etc/passwd) в качестве командной оболочки пользователя ''git'' утилиту ''git-shell''

~~DISQUS~~
